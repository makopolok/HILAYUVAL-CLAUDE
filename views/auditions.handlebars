{{! views/auditions.handlebars }}
{{> header}}
<div class="container mt-5">
  <h1 class="display-4 mb-4">Auditions for {{project.name}}</h1>
  <form class="row g-3 mb-4" method="GET" action="">
    <div class="col-md-4">
      <input type="text" class="form-control" name="name" placeholder="Filter by actor name" value="{{query.name}}">
    </div>
    <div class="col-md-4">
      <input type="text" class="form-control" name="email" placeholder="Filter by email" value="{{query.email}}">
    </div>
    <div class="col-md-4">
      <select class="form-select" name="role">
        <option value="">All Roles</option>
        {{#each project.roles}}
          <option value="{{this.name}}" {{#if (eq ../query.role this.name)}}selected{{/if}}>{{this.name}}</option>
        {{/each}}
      </select>
    </div>
    <div class="col-12">
      <button type="submit" class="btn btn-outline-danger">Filter</button>
      <a href="" class="btn btn-outline-secondary ms-2">Clear</a>
    </div>
  </form>
  {{#if project.roles.length}}
    {{#each project.roles}}
      <div class="card mb-4 border-danger audition-role-card">
        <div class="card-header bg-danger text-white fw-bold">
          Role: {{this.name}}
        </div>
        <div class="card-body">
          {{#if this.auditions}}
            <div class="row">
              {{#each this.auditions}}
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card h-100 border-danger audition-video-card">
                    <div class="card-body">
                      <h6 class="card-title text-danger">{{name}}</h6>
                      <p class="card-text small">{{email}}</p>
                      <iframe src="https://iframe.videodelivery.net/{{videoId}}" width="100%" height="200" frameborder="0" allowfullscreen></iframe>
                      <p class="card-text"><small class="text-muted">Submitted: {{submittedAt}}</small></p>
                    </div>
                  </div>
                </div>
              {{/each}}
            </div>
          {{else}}
            <p class="text-muted">No auditions submitted for this role yet.</p>
          {{/if}}
        </div>
      </div>
    {{/each}}
  {{else}}
    <p>No roles found for this project.</p>
  {{/if}}
  <a href="/projects" class="btn btn-outline-danger mt-4">Back to Projects</a>
</div>
{{> footer}}
